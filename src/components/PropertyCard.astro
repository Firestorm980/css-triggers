---
import { Browsers } from 'src/types';
import PropertyTable from './PropertyTable.astro';

export interface Props {
	property: string;
    initial: Browsers;
    change: Browsers;
}

const { property, initial, change } = Astro.props;
---
<section id={property} tabindex="-1" class="property-card">
    <h2 class="property-card__heading">{property}</h2>
	<button type="button" id="property-card-copy-link-button" data-property={property}>Copy Link<span class="screen-reader-text">for {property}</span></button>

	<div class="property-card__tables">
		<PropertyTable results={initial} caption={`Change from default for ${property}`} />
		<PropertyTable results={change} caption={`Subsequent updates for ${property}`} />
	</div>
</section>
<script>
	const copyLinkButton = document.getElementById('property-card-copy-link-button');

	copyLinkButton.addEventListener('click', () => {
		const url = new URL(window.location.href);
		url.hash = copyLinkButton.dataset.property;
		navigator.clipboard.writeText(url.toString());
	});
</script>
<style>
	.property-card {
		background-color: var(--color-white);
		border: 1px solid var(--color-silver);
		border-radius: 0.5em;
		box-shadow: 0 0 0.5em rgb(0 0 0 / 20%);
		padding: 1em;

		&:target {
			border-color: var(--color-black);
		}
	}

	.property-card__heading {
		font-family: monospace;
		margin-block-start: 0;
	}

	.property-card__tables {
		display: flex;
		flex-wrap: wrap;
		gap: 2em;
	}
</style>
